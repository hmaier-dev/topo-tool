# topo-tool
This tool pulls mac-addresses from a list of **HPE7-Comware-Switches** 
and compares them with the mac-addresses on saved a **Aruba-Clearpass** (**N**etwork**A**ccess**C**ontrol).

To get data from the switches, the `napalm-h3c-comware` python-library is used. 
For scraping the clearpass, the standard clearpass-api is used.

From this comparison, we can allocate which **switch-port** belongs to which **hostname**.

## Pre-Requisites
Before running this tool you need several setup/in-mind:

- network-connection to comware-switches to a clearpass

- username + password for the switches and the clearpass (create an api-reader)

- a mysql/mariadb-Database called `topology-tool` (the schema will get generated by python, in the first scan)

- `cred.py`-file to import username + credentials for 
    - api-user of the clearpass
    - user for ssh-access to the comware-switches
    - database-user

## Usage
By now there a two use-case implemented.
### CLI
You can run the `data/main.py` with the following options.
- `--scanner`: connect to the Clearpass-API, to pull information about all discovered endpoints, and to the network-switches, to get all mac-addresses in the network
- `--search <hostname>`: search through the database to get all collected information about a device

### Web-Interface
You can run the `web/server.go` to get a web-interface for searching through the database. Remember that you first have to run `data/main.py --scanner` to populate the database